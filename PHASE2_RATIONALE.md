# Phase 2 우선순위 결정 근거

**Protocol**: MASP-v1.0  
**Date**: 2026-01-10

---

## 1. 왜 Upbit부터 시작하는가?

### 기술적 이유

| 항목 | Upbit | Binance | KR Stock |
|------|-------|---------|----------|
| API 문서 | 🟢 한글 | 🟡 영문 | 🔴 복잡 |
| 인증 없는 시세 조회 | ✅ 가능 | ✅ 가능 | ❌ 불가능 |
| Rate Limit | 🟢 관대 (10/s) | 🟡 보통 (5/s) | 🔴 엄격 |
| Testnet | ❌ 없음 | ✅ 있음 | ❌ 없음 |
| 예외 처리 | 🟢 간단 | 🟡 보통 | 🔴 복잡 |

**결론**: Upbit은 학습 곡선이 가장 낮아 Phase 2A 시작에 최적

### 비즈니스 이유

1. **개인 투자자 친화적**
   - 한국어 지원으로 디버깅 용이
   - 원화 직접 거래 (환전 불필요)
   - 24/7 운영 (주말 테스트 가능)

2. **리스크 최소화**
   - 소액으로 실거래 테스트 가능
   - 현물 거래만 지원 (레버리지 없음)
   - 청산 위험 없음

3. **시장 접근성**
   - 한국 투자자 대다수 사용
   - BTC, ETH 등 주요 코인 거래량 충분
   - 실시간 차트/뉴스 풍부

---

## 2. 읽기 → 모의 → 실거래 순서 이유

### Phase 2A: Real Market Data (읽기 전용)

**Why First?**
- ✅ **0% 금전 리스크**: 시세 조회만, 주문 실행 없음
- ✅ **API 이해도 향상**: 실제 거래소 응답 형식 학습
- ✅ **에러 핸들링 연습**: Rate Limit, Timeout 등 경험
- ✅ **인프라 검증**: 네트워크, 로깅, 모니터링 테스트

**Fail-Fast 지점**:
- API 키 발급 실패 → 대체 거래소 검토
- Rate Limit 초과 → 캐싱/폴링 주기 조정
- 네트워크 불안정 → Retry 로직 강화

### Phase 2B: Paper Trading (모의 주문)

**Why Second?**
- ✅ **시뮬레이션 정확도**: 실제 시세 기반 체결 시뮬레이션
- ✅ **전략 검증**: 백테스트로 손익 추정
- ✅ **포지션 추적 연습**: 실거래 전 PnL 계산 검증
- ✅ **심리적 준비**: 손실 발생 시 감정 통제 훈련

**Fail-Fast 지점**:
- 백테스트 Sharpe < 1.0 → 전략 폐기/개선
- Paper Trading 손실 연속 → 파라미터 재조정
- PnL 계산 오류 → 알고리즘 수정

### Phase 2C: Live Trading (실거래)

**Why Last?**
- ⚠️ **100% 금전 리스크**: 실제 자금 투입
- ⚠️ **심리적 압박**: 실손익 발생
- ⚠️ **규제 리스크**: 금융감독, 세금 신고
- ⚠️ **회수 불가**: 잘못된 주문 취소 어려움

**진입 조건**:
1. Phase 2B 완료 + Sharpe > 1.5
2. Paper Trading 1개월 운영 무사고
3. Kill-Switch 검증 통과
4. 최소 자금 준비 (손실 허용 범위)

---

## 3. 전략 선택 우선순위

| 전략 | Phase 2A | Phase 2B | Phase 2C |
|------|----------|----------|----------|
| MA Crossover | ✅ 구현됨 | ✅ 백테스트 | ⏳ 대기 |
| Mock Strategy | ✅ 구현됨 | ❌ 제외 | ❌ 제외 |
| RSI Mean Reversion | ⏳ Phase 2A | ⏳ Phase 2B | ⏳ Phase 2C |
| Momentum | ⏳ Phase 2B | ⏳ Phase 2B | ⏳ Phase 2C |

**우선순위 근거**:
- MA Crossover: 단순, 검증된 전략 (학습용)
- RSI: 과매수/과매도 포착 (변동성 대응)
- Momentum: 추세 추종 (상승장 포착)

---

## 4. Adapter 구현 순서

| Adapter | Phase | 이유 |
|---------|-------|------|
| Upbit Spot MarketData | 2A | 한글 문서, Public API |
| Binance Futures MarketData | 2A | 글로벌 표준, Testnet |
| Upbit Spot Execution | 2C | Paper 검증 완료 후 |
| Binance Futures Execution | 2C | 레버리지 리스크, 최후 |
| KR Stock | 보류 | 복잡도 높음, 별도 프로젝트 |

---

## 5. 기술 스택 선택

### HTTP 클라이언트
- **선택**: `requests` (동기) + `aiohttp` (비동기, Phase 2B+)
- **이유**: 
  - requests: 단순, 안정적 (Phase 2A 충분)
  - aiohttp: 다중 거래소 병렬 조회 (Phase 2B 필요)

### WebSocket (실시간 시세)
- **선택**: `websockets` (Phase 2A 후반)
- **이유**: 
  - REST보다 빠른 시세 업데이트
  - Rate Limit 회피
  - Binance Testnet 지원

### 백테스트 엔진
- **선택**: 자체 구현 (Phase 2B)
- **대안**: `backtrader`, `zipline` (복잡도 높음)
- **이유**:
  - 가벼운 구현으로 빠른 반복
  - 전략 로직과 긴밀한 통합
  - 의존성 최소화

---

## 6. 리스크 매트릭스

| 리스크 | 발생 확률 | 영향도 | 완화 전략 | 책임자 |
|--------|-----------|--------|----------|--------|
| API 키 노출 | 낮음 | 치명적 | SecretStr 3중 방어 | Lead AI |
| 과도한 손실 | 중간 | 높음 | Stop-Loss 자동화 | 사용자 |
| API 장애 | 높음 | 중간 | Retry + Fallback | Lead AI |
| 전략 오류 | 중간 | 높음 | 백테스트 + Paper | Lead AI |
| 규제 변경 | 낮음 | 중간 | 모니터링 | 사용자 |

---

## 7. Phase 2 → Phase 3 브릿지

**Phase 2 종료 조건**:
- [ ] Upbit/Binance Live Trading 1개월 무사고
- [ ] 누적 수익률 > 0% (손실 방지)
- [ ] Sharpe Ratio > 1.0 (리스크 대비 수익)
- [ ] Max Drawdown < 15% (최대 낙폭 제한)

**Phase 3 예상 작업**:
- 다중 전략 포트폴리오
- 자동 리밸런싱
- 머신러닝 기반 신호 생성
- 소셜 트레이딩 연동

---

**Updated**: 2026-01-10  
**Status**: Phase 2 Planning Complete  
**Next**: Phase 2A Item #1 - Upbit MarketData Implementation

---

_Generated by Multi-Asset Strategy Platform Phase 2 Rationale_  
_Protocol: MASP-v1.0_
