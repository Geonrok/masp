# Phase 2 ë¡œë“œë§µ

**Protocol**: MASP-v1.0  
**ìƒíƒœ**: Phase 2 PLANNING  
**Date**: 2026-01-10  

---

## ê°œìš”

Phase 2ëŠ” ì‹¤ê±°ë˜(Live Trading) ì¤€ë¹„ ë‹¨ê³„ë¡œ, 3ê°œì˜ ì„œë¸Œí˜ì´ì¦ˆë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:
- **Phase 2A**: Real Market Data (ì½ê¸° ì „ìš©, ì•ˆì „)
- **Phase 2B**: Paper Trading (ëª¨ì˜ ì£¼ë¬¸, ì‹¤ê±°ë˜ ì‹œë®¬ë ˆì´ì…˜)
- **Phase 2C**: Live Trading (ì‹¤ê±°ë˜ ì‹¤í–‰, ìµœì¢… ë‹¨ê³„)

**í•µì‹¬ ì›ì¹™**: ì ì§„ì  ë¦¬ìŠ¤í¬ í™•ëŒ€ (Read â†’ Simulate â†’ Execute)

---

## Phase 2A: Real Market Data (ì½ê¸° ì „ìš©)

### ëª©í‘œ
ì‹¤ì œ ê±°ë˜ì†Œ/ì¦ê¶Œì‚¬ APIë¡œë¶€í„° ì‹œì„¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë˜, **ì£¼ë¬¸ ì‹¤í–‰ì€ ê¸ˆì§€**

### ìš°ì„ ìˆœìœ„ ê²°ì • ê·¼ê±°

**1ìˆœìœ„: Upbit (Korean Crypto Spot)**
- âœ… API ë¬¸ì„œ í•œê¸€ ì œê³µ
- âœ… ì¸ì¦ ì—†ì´ ì‹œì„¸ ì¡°íšŒ ê°€ëŠ¥ (Public API)
- âœ… Rate Limit ê´€ëŒ€ (ì´ˆë‹¹ 10íšŒ)
- âœ… WebSocket ì§€ì› (ì‹¤ì‹œê°„ ì‹œì„¸)

**2ìˆœìœ„: Binance (Global Crypto Futures)**
- âœ… ê¸€ë¡œë²Œ í‘œì¤€ API
- âœ… Testnet ì œê³µ (Paper Trading ì¤€ë¹„)
- âš ï¸ ì˜ë¬¸ ë¬¸ì„œë§Œ ì œê³µ
- âš ï¸ Rate Limit ì—„ê²© (API Key í•„ìˆ˜)

**3ìˆœìœ„: Korea Stock (í•œêµ­íˆ¬ìì¦ê¶Œ/í‚¤ì›€ì¦ê¶Œ)**
- âš ï¸ ë³µì¡í•œ ì¸ì¦ ì ˆì°¨ (ê³µë™ì¸ì¦ì„œ, ê³„ì¢Œë²ˆí˜¸)
- âš ï¸ ì œí•œì ì¸ API ì ‘ê·¼
- âš ï¸ ì‹¤ê³„ì¢Œ ì—°ë™ í•„ìˆ˜ (Testnet ì—†ìŒ)
- ğŸ’¡ **ë³´ë¥˜**: Phase 2B ì´í›„ ê²€í† 

### ì‘ì—… í•­ëª©

| # | í•­ëª© | íŒŒì¼ | ìš°ì„ ìˆœìœ„ | ì˜ˆìƒ ì‹œê°„ |
|---|------|------|----------|----------|
| 1 | Upbit REST API ì—°ë™ | `libs/adapters/real_upbit_spot.py` | HIGH | 8h |
| 2 | Upbit ì‹œì„¸ ì¡°íšŒ í…ŒìŠ¤íŠ¸ | `tests/test_upbit_market_data.py` | HIGH | 4h |
| 3 | Binance REST API ì—°ë™ | `libs/adapters/real_binance_futures.py` | MEDIUM | 8h |
| 4 | Binance ì‹œì„¸ ì¡°íšŒ í…ŒìŠ¤íŠ¸ | `tests/test_binance_market_data.py` | MEDIUM | 4h |
| 5 | Adapter Factory íŒ¨í„´ | `libs/adapters/factory.py` | LOW | 4h |
| 6 | ì‹œì„¸ ìºì‹± ë©”ì»¤ë‹ˆì¦˜ | `libs/core/market_cache.py` | LOW | 6h |

**ì´ ì˜ˆìƒ ì‹œê°„**: 34ì‹œê°„ (ì•½ 1ì£¼)

### ì™„ë£Œ ê¸°ì¤€ (Acceptance Criteria)

- [ ] Upbit `get_quote("BTC/KRW")` ì‹¤ì œ ì‹œì„¸ ë°˜í™˜
- [ ] Binance `get_quote("BTC/USDT:PERP")` ì‹¤ì œ ì‹œì„¸ ë°˜í™˜
- [ ] MarketQuote ê°ì²´ í˜•ì‹ ì¤€ìˆ˜
- [ ] Rate Limit ì¤€ìˆ˜ (429 ì—ëŸ¬ ì—†ìŒ)
- [ ] API í‚¤ ë…¸ì¶œ ë°©ì§€ (ë¡œê·¸/ì˜ˆì™¸ ë©”ì‹œì§€)
- [ ] **ì£¼ë¬¸ ì‹¤í–‰ ë¶ˆê°€ í™•ì¸** (place_order í˜¸ì¶œ ì‹œ RuntimeError)

### ì˜ì¡´ì„±

**í•„ìˆ˜ íŒ¨í‚¤ì§€**:
```
requests>=2.31.0
websockets>=12.0  # Phase 2A í›„ë°˜ (ì‹¤ì‹œê°„ ì‹œì„¸)
ccxt>=4.1.0       # Optional: ê±°ë˜ì†Œ í†µí•© ë¼ì´ë¸ŒëŸ¬ë¦¬
```

**API í‚¤**:
- Upbit: Public APIëŠ” í‚¤ ë¶ˆí•„ìš”, Private APIëŠ” Access Key + Secret Key
- Binance: API Key + API Secret (Testnet ë³„ë„)

---

## Phase 2B: Paper Trading (ëª¨ì˜ ì£¼ë¬¸)

### ëª©í‘œ
ì‹¤ì œ ì£¼ë¬¸ ì‹¤í–‰ ì—†ì´ **ì£¼ë¬¸ ì‹œë®¬ë ˆì´ì…˜ + í¬ì§€ì…˜ ì¶”ì **

### ì‘ì—… í•­ëª©

| # | í•­ëª© | íŒŒì¼ | ìš°ì„ ìˆœìœ„ | ì˜ˆìƒ ì‹œê°„ |
|---|------|------|----------|----------|
| 1 | Paper Execution Adapter | `libs/adapters/paper_execution.py` | HIGH | 12h |
| 2 | í¬ì§€ì…˜ ì¶”ì  ëª¨ë“ˆ | `libs/core/position_tracker.py` | HIGH | 8h |
| 3 | PnL ê³„ì‚° ì—”ì§„ | `libs/core/pnl_calculator.py` | HIGH | 6h |
| 4 | **Kill-Switch í†µí•© í…ŒìŠ¤íŠ¸** | `tests/test_kill_switch.py` | **HIGH** | **2h** |
| 5 | **Order Validator ë¦¬í—ˆì„¤** | `libs/core/order_validator.py` | **HIGH** | **2h** |
| 6 | ì£¼ë¬¸ ì‹œë®¬ë ˆì´ì…˜ ë¡œì§ | (Execution Adapter ë‚´ë¶€) | MEDIUM | 8h |
| 7 | ë°±í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ | `libs/backtest/` | MEDIUM | 20h |
| 8 | ì „ëµ ì„±ê³¼ ì¸¡ì • | `libs/analytics/performance.py` | LOW | 8h |

**ì´ ì˜ˆìƒ ì‹œê°„**: 66ì‹œê°„ (ì•½ 2ì£¼)

### ì™„ë£Œ ê¸°ì¤€ (Acceptance Criteria)

- [ ] `place_order("BTC/USDT", "BUY", 0.1)` ê°€ìƒ ì£¼ë¬¸ ìƒì„±
- [ ] í˜„ì¬ ì‹œì„¸ ê¸°ì¤€ ì²´ê²° ì‹œë®¬ë ˆì´ì…˜
- [ ] í¬ì§€ì…˜ ì¶”ì  (`get_positions()` ë°˜í™˜)
- [ ] ë¯¸ì‹¤í˜„/ì‹¤í˜„ PnL ê³„ì‚°
- [ ] ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ê³¼ê±° ë°ì´í„°ë¡œ ì „ëµ ê²€ì¦)
- [ ] Sharpe Ratio, Max Drawdown ë“± ì„±ê³¼ ì§€í‘œ ì‚°ì¶œ
- [ ] **ì‹¤ì œ ì£¼ë¬¸ ì‹¤í–‰ 0ê±´** (adapter_mode=paper ê°•ì œ)
- [ ] **Kill-Switch ë¦¬í—ˆì„¤ 3íšŒ ì´ìƒ** í†µê³¼
- [ ] **ì—°ì† ì˜¤ë¥˜ 3íšŒ ì‹œ ìë™ ì¤‘ë‹¨** ê²€ì¦

### Shadow Trading êµ¬í˜„ (Upbit Testnet ë¶€ì¬ ëŒ€ì‘)

**ì²´ê²° ì‹œë®¬ë ˆì´ì…˜ ê·œì¹™**:

| ì£¼ë¬¸ ìœ í˜• | ì²´ê²°ê°€ | ì¡°ê±´ |
|----------|--------|------|
| ì‹œì¥ê°€ | last_price Â± 0.05% (ìŠ¬ë¦¬í”¼ì§€) | ì¦‰ì‹œ ì²´ê²°, ì§€ì—° 100-500ms |
| ì§€ì •ê°€ | ì§€ì •ê°€ | ë‹¤ìŒ í‹± ê³ ê°€Â·ì €ê°€ í†µê³¼ ì‹œ ì²´ê²° |

**ìˆ˜ìˆ˜ë£Œ ì ìš©**:
- Upbit Spot: 0.05%
- Binance Futures: 0.04%

**ì¶”ê°€ AC**:
- [ ] Upbit ê¸°ì¤€ **ì‹¤ì£¼ë¬¸ 0ê±´ ë³´ì¥** (adapter_mode=paper ê°•ì œ)
- [ ] adapter_mode=real í˜¸ì¶œ ì‹œ RuntimeError ë°œìƒ

### ì„¤ê³„ ì›ì¹™

**1. ì‹œë®¬ë ˆì´ì…˜ ì •í™•ë„**
- Slippage ëª¨ë¸ë§: ì‹œì¥ê°€ ì£¼ë¬¸ ì‹œ Â±0.05% ê³ ë ¤
- ìˆ˜ìˆ˜ë£Œ ì ìš©: Upbit 0.05%, Binance Futures 0.04%
- Latency ì‹œë®¬ë ˆì´ì…˜: ì£¼ë¬¸ â†’ ì²´ê²° ê°„ 100-500ms ì§€ì—°

**2. ë¦¬ìŠ¤í¬ ê´€ë¦¬**
- ìµœëŒ€ í¬ì§€ì…˜ í¬ê¸° ì œí•œ
- Stop-Loss ìë™ ì ìš©
- ë ˆë²„ë¦¬ì§€ ì œí•œ (Futures: ìµœëŒ€ 5ë°°)

---

## Phase 2C: Live Trading (ì‹¤ê±°ë˜)

### ëª©í‘œ
**ì‹¤ì œ ìê¸ˆì„ ì‚¬ìš©í•œ ì£¼ë¬¸ ì‹¤í–‰** (ìµœì¢… ë‹¨ê³„)

### ì „ì œ ì¡°ê±´ (ê°•í™”)

| # | ì¡°ê±´ | ê²€ì¦ ë°©ë²• | ë¹„ê³  |
|---|------|----------|------|
| 1 | Phase 2B ì™„ë£Œ | ë°±í…ŒìŠ¤íŠ¸ Sharpe > 1.5 | ê¸°ì¡´ |
| 2 | Paper Trading 1ê°œì›” ì‹¤ì  | ì¼ìˆ˜ìµë¥  ë³€ë™ì„± < 3% | ê¸°ì¡´ |
| 3 | API í‚¤ ë°œê¸‰ ì™„ë£Œ | .env ì„¤ì • + validate í†µê³¼ | ê¸°ì¡´ |
| 4 | Kill-Switch í…ŒìŠ¤íŠ¸ | íŒŒì¼ ìƒì„± ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨ í™•ì¸ | ê¸°ì¡´ |
| 5 | ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ | ì‹¤ì‹œê°„ PnL/í¬ì§€ì…˜ í™•ì¸ ê°€ëŠ¥ | ê¸°ì¡´ |
| 6 | **ìµœì†Œ ê±°ë˜ ìˆ˜** | 200 trades ë˜ëŠ” 20 trading days | **ì‹ ê·œ** |
| 7 | **Max Drawdown** | MDD < 15% | **ì‹ ê·œ** |
| 8 | **Kill-Switch ë¦¬í—ˆì„¤** | 3íšŒ ì´ìƒ ì‹œë®¬ë ˆì´ì…˜ í†µê³¼ | **ì‹ ê·œ** |
| 9 | **ì—°ì† ì˜¤ë¥˜ ëŒ€ì‘** | 3íšŒ ì—°ì† ì˜¤ë¥˜ ì‹œ ìë™ ì¤‘ë‹¨ ê²€ì¦ | **ì‹ ê·œ** |

### Sharpe ê³„ì‚° ê¸°ì¤€
- êµ¬ê°„: ìµœê·¼ 30 trading days
- ìˆ˜ìˆ˜ë£Œ: í¬í•¨ (Upbit 0.05%)
- ìŠ¬ë¦¬í”¼ì§€: í¬í•¨ (0.05%)

### ì‘ì—… í•­ëª©

| # | í•­ëª© | íŒŒì¼ | ìš°ì„ ìˆœìœ„ | ì˜ˆìƒ ì‹œê°„ |
|---|------|------|----------|----------|
| 1 | Upbit Live Execution | `libs/adapters/real_upbit_spot.py` | HIGH | 12h |
| 2 | ì£¼ë¬¸ ê²€ì¦ ë¡œì§ | `libs/core/order_validator.py` | HIGH | 8h |
| 3 | ê¸´ê¸‰ ì²­ì‚° ë©”ì»¤ë‹ˆì¦˜ | `libs/core/emergency_exit.py` | HIGH | 6h |
| 4 | ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ | `apps/monitoring_dashboard.py` | MEDIUM | 16h |
| 5 | ì•Œë¦¼ ì‹œìŠ¤í…œ | `libs/core/notification.py` | MEDIUM | 8h |
| 6 | ê°ì‚¬ ë¡œê·¸ | `libs/core/audit_logger.py` | LOW | 6h |

**ì´ ì˜ˆìƒ ì‹œê°„**: 56ì‹œê°„ (ì•½ 2ì£¼)

### ì™„ë£Œ ê¸°ì¤€ (Acceptance Criteria)

- [ ] `adapter_mode=real` ì„¤ì • ì‹œ ì‹¤ì œ ì£¼ë¬¸ ì‹¤í–‰
- [ ] API í‚¤ ê²€ì¦ í†µê³¼ (validate_real_mode_requirements)
- [ ] ì£¼ë¬¸ ì „ ìê¸ˆ ì¶©ë¶„ì„± í™•ì¸
- [ ] ì£¼ë¬¸ ì²´ê²° í™•ì¸ (get_order_status)
- [ ] ì²­ì‚° ì£¼ë¬¸ ì‹¤í–‰ ê°€ëŠ¥
- [ ] Kill-Switch ì‘ë™ í™•ì¸
- [ ] ëª¨ë“  ì£¼ë¬¸ ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
- [ ] **ìµœì†Œ 1ì£¼ì¼ ë¬´ì‚¬ê³  ìš´ì˜**

### ì•ˆì „ ì¥ì¹˜ (Safety Mechanisms)

**1. Pre-Order Validation**
```python
# ì£¼ë¬¸ ì‹¤í–‰ ì „ í•„ìˆ˜ ì²´í¬
- ìê¸ˆ ì¶©ë¶„ì„± (ì”ê³  Ã— 0.9 ì´ìƒ)
- í¬ì§€ì…˜ í¬ê¸° ì œí•œ (ì´ ìì‚°ì˜ 10% ì´í•˜)
- API í‚¤ ìœ íš¨ì„±
- Kill-Switch íŒŒì¼ ë¯¸ì¡´ì¬
- ì‹œì¥ ì˜ì—…ì‹œê°„ (asset_class == KR_STOCKì¼ ë•Œë§Œ)  # ì¡°ê±´ë¶€ ì²´í¬
```

**2. Post-Order Monitoring**
```python
# ì£¼ë¬¸ ì‹¤í–‰ í›„ ëª¨ë‹ˆí„°ë§
- ì²´ê²° í™•ì¸ (3ì´ˆ ë‚´)
- ë¯¸ì²´ê²° ì‹œ ì·¨ì†Œ + ì¬ì‹œë„
- í¬ì§€ì…˜/ì”ê³  ë™ê¸°í™”
- ì´ë²¤íŠ¸ ë¡œê·¸ ê¸°ë¡
```

**3. Emergency Exit**
```python
# ê¸´ê¸‰ ìƒí™© ì²˜ë¦¬
- Kill-Switch íŒŒì¼ ìƒì„± â†’ ëª¨ë“  í¬ì§€ì…˜ ì²­ì‚°
- ì†ì‹¤ í•œë„ ì´ˆê³¼ â†’ ìë™ ì²­ì‚°
- API ì˜¤ë¥˜ ì—°ì† 3íšŒ â†’ ì„œë¹„ìŠ¤ ì¤‘ë‹¨
```

---

## ì „ì²´ ì¼ì •

| Phase | ê¸°ê°„ | ì£¼ìš” ë§ˆì¼ìŠ¤í†¤ |
|-------|------|---------------|
| Phase 2A | 1ì£¼ (5ì¼) | Upbit/Binance ì‹œì„¸ ì¡°íšŒ |
| Phase 2B | 2ì£¼ (10ì¼) | Paper Trading + ë°±í…ŒìŠ¤íŠ¸ |
| Phase 2C | 2ì£¼ (10ì¼) | Live Trading ì¤€ë¹„ |
| **ë²„í¼** | **1.5ì£¼ (7ì¼)** | ë²„ê·¸ ìˆ˜ì •, ë¬¸ì„œí™”, ì´ìŠˆ ëŒ€ì‘ |
| **í•©ê³„** | **6.5ì£¼** | Phase 2 ì™„ë£Œ |

### ì¼ì • ì‚°ì • ê¸°ì¤€

**ê°€ì •**:
- ìˆœìˆ˜ ê°œë°œ ì‹œê°„: 156h (2A 34h + 2B 66h + 2C 56h)
- í•˜ë£¨ í‰ê·  ê°œë°œ: 5-6h (íšŒì˜/ë””ë²„ê¹…/ë¬¸ì„œí™” í¬í•¨)
- ì£¼ë‹¹ ì‘ì—…ì¼: 5ì¼

**ê³„ì‚°**:
- 156h Ã· 5h/day â‰ˆ 31ì¼ = 6.2ì£¼ â†’ 6.5ì£¼ (ë²„í¼ í¬í•¨)
- ë²„í¼ 1.5ì£¼: ì˜ˆì¸¡ ë¶ˆê°€ ì´ìŠˆ (API ë³€ê²½, ë„¤íŠ¸ì›Œí¬ ì¥ì• ) ëŒ€ì‘

**ì˜¤ë²„í—¤ë“œ í¬í•¨**:
- API ë¬¸ì„œ í•™ìŠµ, í™˜ê²½ ì…‹ì—…, ì˜ì¡´ì„± ê´€ë¦¬
- ì½”ë“œ ë¦¬ë·°, í…ŒìŠ¤íŠ¸ ì‘ì„±, ë””ë²„ê¹…

---

## ë¦¬ìŠ¤í¬ ë° ì™„í™” ì „ëµ

| ë¦¬ìŠ¤í¬ | ì˜í–¥ë„ | ì™„í™” ì „ëµ |
|--------|--------|----------|
| API í‚¤ ë…¸ì¶œ | ğŸ”´ CRITICAL | SecretStr 3ì¤‘ ë°©ì–´ ìœ ì§€ |
| ê³¼ë„í•œ ì£¼ë¬¸ | ğŸ”´ CRITICAL | Rate Limit + ì¼ì¼ í•œë„ |
| ë„¤íŠ¸ì›Œí¬ ì¥ì•  | ğŸŸ¡ HIGH | ì¬ì‹œë„ ë¡œì§ + Timeout |
| ì˜ëª»ëœ ì‹œì„¸ | ğŸŸ¡ HIGH | ë‹¤ì¤‘ ì†ŒìŠ¤ í™•ì¸ |
| API ë³€ê²½ | ğŸŸ¢ MEDIUM | ë²„ì „ ê³ ì • + ëª¨ë‹ˆí„°ë§ |

---

## ì„±ê³µ ì§€í‘œ

| ì§€í‘œ | Phase 2A | Phase 2B | Phase 2C |
|------|----------|----------|----------|
| ì‹œì„¸ ì¡°íšŒ ì„±ê³µë¥  | > 99% | > 99% | > 99% |
| API ì˜¤ë¥˜ìœ¨ | < 1% | < 0.5% | < 0.1% |
| ì£¼ë¬¸ ì²´ê²°ë¥  | N/A | 100% (ëª¨ì˜) | > 95% |
| PnL ì¶”ì  ì •í™•ë„ | N/A | > 99% | > 99.9% |
| Uptime | N/A | > 95% | > 99% |

---

## Next Steps

1. **Phase 2A ì‹œì‘**: Upbit ì‹œì„¸ ì¡°íšŒ êµ¬í˜„
2. **API í‚¤ ë°œê¸‰**: Upbit Access Key/Secret Key
3. **Testnet ì„¤ì •**: Binance Testnet API Key
4. **ëª¨ë‹ˆí„°ë§ ì¤€ë¹„**: ë¡œê·¸ ìˆ˜ì§‘ ì¸í”„ë¼

---

**Updated**: 2026-01-10 (Patched after Cross-Model Review)  
**Status**: Phase 2 PLANNING APPROVED â†’ Phase 2A Ready  
**Next**: Upbit Real Market Data Adapter Implementation  
**Review**: GPT/Gemini/Perplexity APPROVED (3/3)

---

_Generated by Multi-Asset Strategy Platform Phase 2 Planning_  
_Protocol: MASP-v1.0_
